-- Crear funcion para calcular edad
CREATE FUNCTION dbo.CalcularEdad (@FechaNacimiento DATE)
RETURNS INT
AS
BEGIN
    DECLARE @Edad INT;
    SET @Edad = DATEDIFF(YEAR, @FechaNacimiento, GETDATE());

    IF (MONTH(@FechaNacimiento) > MONTH(GETDATE())) OR
       (MONTH(@FechaNacimiento) = MONTH(GETDATE()) AND DAY(@FechaNacimiento) > DAY(GETDATE()))
    BEGIN
        SET @Edad = @Edad - 1;
    END

    RETURN @Edad;
END;
